JS Modules and HTTP
===================

Convert to JS modules and http-only

```
2025-11-20		Start ðŸ„¹Â§
```

The conversion to js modules for Turtle was fairly painless.

I'm not expecting it to be so easy here:
* Older, more complex, messier code
* Theme code is currently dynamically loaded - I know this can be done with modules, but *promises* (shiver)
* More code to deal with overall



Initial thoughts
----------------

It's kinda lame, but I'm inclned to just run at this one like a bull at gate, get something working, and think about it after.
Promises are still a bad tasting medicine for me.



### First problem - namespaces

So here's a problem i didn't have in Turtle.

Up till now I've made use of classes for namespacing, and for that job they're "not too bad".

I'd collected my classes under two main namespaces 'yearclock' and 'ldpercy', so for instance I have an extension of js Date called 'yearclock.Date'.

In js modules though i'm not sure if/how I should do the same thing.



Starting off
------------

Running around adding exports and imports and updating things.
It's very messy and makes me a bit queasy.

Run into my first hard stopper - I think I have a circular import dependency of some sort:
FF:
> Uncaught ReferenceError: can't access lexical declaration 'Date' before initialization
Ch:
> YearClock.js:114 Uncaught ReferenceError: Failed to read the 'Date' property from 'Module': Cannot access 'Date' before initialization
    at YearClock.js:114:48

Not sure how to track it down just yet.

https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules#cyclic_imports


